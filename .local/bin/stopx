#!/bin/sh

# Should only stop the 'current' X,
# and leave other users or the same
# user running on other ttys alone.
# Set $THIS_TTY to $(tty) at login.

[ -z "$THIS_TTY" ] && exit 2
thisxpid=$(pgrep -u "$USER" -t "${THIS_TTY##*/}" xinit)
[ -z "$thisxpid" ] && exit 1
[ "$(printf "no\nyes" | dmenu -i -p "kill $thisxpid" -wd 200 )" = "yes" ] &&
    kill -HUP "$thisxpid"
exit 0

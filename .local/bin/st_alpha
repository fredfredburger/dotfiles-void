#!/bin/bash

# requires wjt
# https://github.com/ianremmler/wjt
# or
# https://github.com/tdukv/wjt

while read -r ai; do
    a=$ai
done <<EOT
    $(wjt -p "set opacity:" -x "90" || pkill -u "$USER" -x "$(basename "$0")")
EOT
# Hack to cancel if wjt is canceled ^---------------------------------------^

[ -z "$a" ] && a=90

if [ "$a" = 100 ]; then
    af="1.0"
elif [ "$a" -lt 10 ]; then
    af="0.0${a}"
else
    af="0.${a}"
fi

xrdb -merge <(echo "st.alpha:  ${af}") && pkill -u "$USER" -x -USR1 st
notify-send "st alpha set to ${a}% (${af})"
